---
title: "2. Lexical Analysis"
date: 2024-01-10T17:46:04+09:00
tags: ["ì»´íŒŒì¼ëŸ¬", "Lexical Analysis", "DFA", "NFA", "RegEx", "Lexer"]
draft: false
categories: ["2024", "ì»´íŒŒì¼ëŸ¬"]
---

## Token
ë¬¸ìì—´ì„ í•´ë‹¹ ë¬¸ìì—´ì˜ ì˜ë¯¸í•˜ëŠ” ì—°ì‚°, ê°’ì— ë”°ë¼ tokenìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.
|Token  |Example|
|:---:|:---:|
|Keyword|int, void, if|
|Identifier|a, var_1|
|Integer| 10, 20|
|Operators | +, =, *|
|Whitespace| â€œ â€œ, \t, \n|

## Regula Expression
Tokenì„ ë‚˜ëˆ„ëŠ” ë°©ë²•ì€ Automataë¥¼ ì´ìš©í•œë‹¤. ì´ì— ì•ì„œ Regula Expression (RegEx) ì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ í•„ìš”ê°€ ìˆë‹¤.


RegExëŠ” Base caseì™€ Inductive caseë¡œ êµ¬ì„±ëœë‹¤.


### Regula language
1. ğšº ë¥¼ ì´ìš©í•˜ì—¬ symbolë“¤ì˜ ì§‘í•©ì„ í‘œê¸°í•œë‹¤.

ex) binary numbers : ğšº = {'0','1'}, lowercase letters : ğšº = {'a','b',...'z'}

2. WordëŠ” ì£¼ì–´ì§„ ğšºì˜ symbolë“¤ì˜ ë‚˜ì—´ì´ë‹¤.
- empty wordë¥¼ ë‚˜íƒ€ë‚¼ë•Œì—ëŠ” ğœ–ì„ ì‚¬ìš©í•œë‹¤.

ex) ğšº = {'0','1','2'} -> word : ğœ–, "1," ,"12", "012"

3. Languageë€ wordì˜ ì§‘í•©ì„ ì˜ë¯¸í•œë‹¤.
- L1 = {"a","b","ab","aaaab",...}


### Base case
- ë¹ˆ ë¬¸ìëŠ” ğœ–ë¡œ í‘œê¸°í•œë‹¤.
- í•˜ë‚˜ì˜ ë¬¸ìëŠ” 'c' âˆˆ ğšº ë¡œ í‘œê¸°í•œë‹¤.
### Inductive case
- Union : R1|R2 : R1 or R2
- Concat : R1âˆ™R2 : R1 and R2
- Repeat : R* : Rì„ ë°˜ë³µ
- ìš°ì„ ìˆœìœ„ëŠ” * > âˆ™ > | ìˆœì´ë‹¤.

ex){ ğ, "a", "aa", "aaa", ..., "b", "bb", "bbb", ... }

### Formal Definition of RegEx
L(R) : a set defined by R

![Formal](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.Formal.png?raw=true)


## Defining Token
RegExë¥¼ ì´ìš©í•˜ì—¬ Tokenì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

- digit = | '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9'
- letter_ = [ 'A'-'Z' ] | [ 'a'-'z' ] | '_' 

- Keyword = "int" | "void" | "if" | "else" | ... 
- Integer = digit 
- Identifier = letter_ ( letter_ | digit )*
- Operator = "=" | "+" | "-" | ... 
- Whitespaces = (" " | "\t" | "\n")+ 


## Automata
Finite-state AutomataëŠ” NFA, DFA ë‘ ì¢…ë¥˜ê°€ ìˆë‹¤.
### Non-deterministic finite automata (NFA)
> Initial state, Accepting stateê°€ ì¡´ì¬í•˜ë©° ê° stateë“¤ì€ ğœ– ë˜ëŠ” ğšº ì— ë”°ë¼ ë³€í™”í•œë‹¤. 
>
> ë‹¤ìŒ stateë¡œ ê°€ëŠ” Outgoing edgesë“¤ì´ ê°™ì€ symbolì„ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

![NFA](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NFA.png?raw=true)

NFA ë¥¼ ì´ìš©í•˜ì—¬ RegEx R = ('a'|'b')* âˆ™ 'a'ë¥¼ êµ¬í˜„í•´ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

![NFA_ex](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NFA_ex.png?raw=true)

### Deterministic finite automata (DFA)
> initial state, Accepting stateê°€ ì¡´ì¬í•˜ë©° ê° stateë“¤ì€ ğšºì— ë”°ë¼ ë³€í™”í•œë‹¤.
>
> ë‹¤ìŒ Stateë¡œ ê°€ëŠ” Outgoing edgesë“¤ì´ ê°™ì€ symbolì„ ê³µìœ  í•  ìˆ˜ ì—†ë‹¤.


### ğ-closure
ìš°ë¦¬ëŠ” RegEx->NFA->DFA->Code(Lexer) ìˆœìœ¼ë¡œ ë³€í™˜í•˜ë ¤ê³  í•œë‹¤.

ì´ë¥¼ ìœ„íˆ ğ-closure ë¼ëŠ” ê°œë…ì„ ë„ì…í•œë‹¤.

- ğ-closure(S) : Sì—ì„œ symbol ì—†ì´ ë„ë‹¬ í•  ìˆ˜ ìˆëŠ” stateì˜ ì§‘í•©

![e-closure](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.e-closure.png?raw=true)
ìœ„ ê·¸ë¦¼ì—ì„œ ğ-closure({s2,s5}) = {s2,s5,s6} ì´ë‹¤.

### NFA to DFA
NFAë¥¼ DFAë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„  NFAì˜ ì—¬ëŸ¬ stateë¥¼ DFAì˜ í•˜ë‚˜ì˜ stateì— mapping í•´ì•¼í•œë‹¤.

1. NFAì˜ s0ì˜ ğ-closure ê³„ì‚°
- ğ-closure({s0})={s0,s1}, ì´ëŠ” DFAì˜ starting stateê°€ ëœë‹¤.
![NtoD_1](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NtoD_1.png?raw=true)
2. S01ì—ì„œ ğšºì˜ symbolë“¤ì— ëŒ€í•´ì„œ ğ-closure ê³„ì‚°
- 'a' : ğ-closure({s2})={s2}
- 'b' : ğœ™
![NtoD_2](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NtoD_2.png?raw=true)
3. ì´ë¥¼ s2ì—ì„œë„ ë°˜ë³µí•œë‹¤.
- 'a' : ğœ™
- 'b' : ğ-closure({s2})={s1,s3}
![NtoD_3](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NtoD_3.png?raw=true)
4. s13 ì—ì„œë„ ë°˜ë³µí•œë‹¤.
- 'a' : ğœ–-closure( {ğ‘ 1,s3} ) = {ğ‘ 2}
- 'b' : ğœ™
![NtoD_4](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NtoD_4.png?raw=true)
5. íƒìƒ‰í•˜ì§€ ì•Šì€ stateê°€ ì—†ìœ¼ë¯€ë¡œ ì¤‘ë‹¨í•œë‹¤. accepting stateëŠ” NFAì™€ ë™ì¼í•˜ë‹¤.
![NtoD_5](https://github.com/246p/blog/blob/main/Hugo/blog/content/post/compiler/2.NtoD_5.png?raw=true)

## Ambiguity
ë§Œì•½ int =x+10 ì´ë¼ëŠ” ë¬¸ìì—´ì„ tokenìœ¼ë¡œ êµ¬ë¶„í•´ ë³´ì. ì´ë•Œ intëŠ” keyword, indentifier ë‘˜ë‹¤ í•´ë‹¹í•  ìˆ˜ ìˆë‹¤.

ì´ëŸ¬í•œ ëª¨í˜¸ì„±ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œëŠ” ê° keywordê°„ì— precedenceë¥¼ ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.