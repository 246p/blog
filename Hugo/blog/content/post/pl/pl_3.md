---
title: "3. 변수와 환경"
date: 2024-01-24T13:37:54+09:00
tags: ["추론 규칙", "PL"]
draft: false
categories: ["2024", "PL", "학부연구생"]
---
# 3. 변수와 환경
## 3.1 문법구조
우리가 1장에서 선언한 정수형 언어를 다음과 같이 확장한다.

     E -> n
        | E1 + E2
        | E1 - E2 
        | E1 * E2
        | E1 / E2
        | x                         변수
        | let x = E1 in E2          let식
        | if E1 then E2 else E3     조건식
        | iszero E                  bool식

### x 
먼저 프로그램에서 식이 올 수 있는 위치에 변수 x를 사용할 수 있도록 하였다.
### let x = E1 in E2 
변수 x를 선언하는 식이다. E1의 값을 x라고 한 후 E2를 계산한다. 변수 x를 사용할 수 있는 유효범위는 E2이다.
### if E1 then E2 else E3
조건식이다. E1을 계산하면 참 또는 거짓이 나와야 한다.

E1이 참이라면 E2를, 거짓이라면 E3를 계산한다.

### izero E
조건문에서 E1을 연산하기 위하여 도입된 식으로 true또는 false를 계산한다.

## 3.2 의미구조
이제 언어의 의미구조를 정하여 위의 언어를 실행하는 규칙을 만들어주자
### 3.2.0 표기법
합집합 X + Y

차집합 X \ Y

곱집합 X × Y (cartesian product)

### 3.2.1 환경
프로그램이 변수를 포함하게 된다면 변수의 현재 값을 알려주는 장치인 환경이 필요하다. 예를들어 x+y는 x와 y가 현재 어떤 값을 갖는지에 따라 달라진다. 

1. x=1, y=2인 환경 {x |→ 1, y |→ 2} 

2. x=2, y=3인 환경 {x |→ 2, y |→ 3}

x+y는 두 환경에서 값이 변경된다

즉 환경은 변수에서 값으로 가는 유한 함수이다.
> Env = Var -> Val

가능한 모든 환경을 Env, 프로그램에서 사용가능한 변수의 집합을 Var로 표기하였다.

Val은 프로그램이 다루는 값들의 집합을 의미한다 현재 언어에서 값은 정수와 T/F를 다루고 있으므로 Val은 다음과 같이 정의할 수 있다.

Val= Z + B

이와같이 프로그램의 의미를 정의하기 위해 필요한 집합의 모임 (Env, Var, Val)을 의미공간이라고 한다.

환경에 대한 표기법은 다음과 같다.
- 환경을 나타낼때 ρ를 사용한다 (ρ∈Env)
- {x1 |→ v1, . . . , xk |→ vk}는 x1,...,xk가 v1,...,yk로 매핑되어있는 환경이다.
- 환경ρ에서 변수 x가 의미하는 값은 ρ(x)로 표기한다.
- 아무 변수도 정의되어 있지 않은 환경은 빈 환경은 ∅로 표기한다.
- {x |→ v}ρ는 주어진 환경 ρ에서 x=v 추가하여 확장한 환경을 의미한다.

### 3.2.2 추론규칙
환경 ρ에서 식 E를 계산한 값은 v이다를 다음과 같이 표현한다
> ρ ⊢ E ⇒ v

예를들어 ∅ ⊢ 1 ⇒ 1, {x |→ 1} ⊢ x+1 ⇒ 2 이다.

이와 같은 의미구조를 정의하는 추론규칙은 다음과 같다.
    

    ---------- E-Num
    ρ ⊢ n ⇒ n 

    ρ ⊢ E1 ⇒ n1   ρ ⊢ E2 ⇒ n2
    --------------------------- E-Plus
    ρ ⊢ E1 + E2 ⇒ n1 + n2

    ρ ⊢ E1 ⇒ n1   ρ ⊢ E2 ⇒ n2
    --------------------------- E-Minus
    ρ ⊢ E1 - E2 ⇒ n1 − n2

    ρ ⊢ E1 ⇒ n1   ρ ⊢ E2 ⇒ n2
    --------------------------- E-Mult
    ρ ⊢ E1 * E2 ⇒ n1 ∗ n2

    ρ ⊢ E1 ⇒ n1   ρ ⊢ E2 ⇒ n2 
    --------------------------- n2!=0  E-Div
    ρ ⊢ E1 / E2 ⇒ n1/n2


    ------------- E-Var
    ρ ⊢ x ⇒ ρ(x)

    ρ ⊢ E1 ⇒ v1   {x |→ v1}ρ ⊢ E2 ⇒ v
    ----------------------------------- E-Let
    ρ ⊢ let x = E1 in E2 ⇒ v E-Let

    ρ ⊢ E1 ⇒ true   ρ ⊢ E2 ⇒ v
    ------------------------------- E-If-T
    ρ ⊢ if E1 then E2 else E3 ⇒ v 
    
    ρ ⊢ E1 ⇒ false  ρ ⊢ E3 ⇒ v
    ------------------------------- E-If-F
    ρ ⊢ if E1 then E2 else E3 ⇒ v 
    
    ρ ⊢ E ⇒ 0
    --------------------- E-Zero-T
    ρ ⊢ iszero E ⇒ true
    
    ρ ⊢ E ⇒ n
    --------------------- n!=0 E-Zero-F
    ρ ⊢ iszero E ⇒ false
